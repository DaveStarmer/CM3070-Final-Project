<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instructions</title>
    <link rel="stylesheet" href="css/style.css">
  </head>

  <body>
    <h1>Camera System Deployment Instructions</h1>
    <h2>Create Account</h2>
    <ol>
      <li>Go to <a href="https://aws.amazon.com/" target="_blank">https://aws.amazon.com/</a></li>
      <li>Click 'Create an AWS Account' (top right-hand corner)</li>
      <li>Complete sign up according to directions</li>
    </ol>
    <h2>Get Domain Name and Certificate</h2>
    <ol>
      <li>
        Log into AWS Console ('sign in' from
        <a href="https://aws.amazon.com/" target="_blank">https://aws.amazon.com/</a>, or you may already be there from
        the previous step)
        <img src="images/01_register_domain/01_console.png" alt="AWS Console" class="screenshot">
      </li>
      <li>Into the search box at the top of the page type <span class="cmd">Route 53</span></li>
      <li>Select Route 53 from the list</li>
      <li>
        On the Route 53 page, Click on 'Register Domains' at the top right
        <img src="images/01_register_domain/02_domains_screen.png" alt="Empty Domain List Screen" class="screenshot">
      </li>
      <li>
        Enter preferred domain name, other options will be shown along with their yearly cost.
        <img src="images/01_register_domain/03_register_domain.png" alt="Register Domain Screen" class="screenshot">
      </li>
      <li>Click on 'select' next to the desired domain name</li>
      <li>
        Click on 'Proceed to Checkout'
        <img src="images/01_register_domain/04_domain_in_basket.png" alt="Domain in Basket" class="screenshot">
      </li>
      <li>
        On the next screen, set domain renewal as appropriate.
        <img src="images/01_register_domain/05_renewal_options.png" alt="Renewal Options" class="screenshot">
      </li>
      <li>
        Fill in your details on the next page.
        <img src="images/01_register_domain/06_personal_details.png" alt="Personal Details" class="screenshot">
      </li>
      <li>
        Review your purchase and click 'submit'
        <img src="images/01_register_domain/07_review_purchase.png" alt="Review purchase" class="screenshot">
      </li>
      <li>
        Domain will be created, and will appear on the page when Complete
        <img src="images/01_register_domain/08_return_to_domains_list.png" alt="Domains List" class="screenshot">
      </li>
      <li>
        After a few minutes, the domain will appear on the list with a status of 'In progress'
        <img src="images/01_register_domain/09_domain_on_list.png" alt="Domain appears on list" class="screenshot">
      </li>
      <li>Select 'Hosted Zones' from the menu on the left</li>
      <li> Repeat the following steps setting 'Record name' to blank, <span class="cmd">auth</span>,
        and <span class="cmd">www</span>
        <ol>
          <li>Click 'Create Record'</li>
          <li>
            Leave the 'Record name' blank
            <img src="images/01_register_domain/10_create_a_record.png" alt="A Record Creation" class="screenshot">
          </li>
          <li>Enter <span class="cmd">1.2.3.4</span> in the 'Value' field</li>
          <li>Click the '1m' button to set the TTL to 1 minute</li>
        </ol>
      </li>
      <li>The previous steps can be completed to create AAAA records for IPv6 records if desired</li>
      <li>
        Enter <span class="cmd">Certificate Manager</span> in the search box, and select from the list
      </li>
      <li>Click on 'request'</li>
      <li>Ensure 'Request a public certificate' is selected, and click 'next'</li>
      <li>
        In 'Fully qualified domain name' enter <span class="cmd">*.</span> followed by the domain name registered
        earlier, e.g. <span class="cmd">*.example.com</span>. Leave all other options as shown below
        <img src="images/01_register_domain/11_cert_request.png" alt="Certificat Request Page" class="screenshot">
      </li>
      <li>Take note of the 'ARN' for the certificate</li>
      <li>Click on 'request'</li>
      <li>
        The resulting page will show the certificate is being requested. Click on 'Create records in Route 53'.
        <img src="images/01_register_domain/12_cert_requested.png" alt="Certificate requested" class="screenshot">
      </li>
    </ol>
    <h2>Deploy Cloudformation template</h2>
    <ol>
      <li>Enter <span class="cmd">CloudFormation</span> in the search bar</li>
      <li>Ensure that the region (top right-hand corner) is set to 'United States (N. Virginia)</li>
      <li>Select 'Create stack' from the top right-hand corner</li>
      <li>Select the 'With new resources (standard) option</li>
      <li>
        Select 'Upload a template file' and choose the CloudFrontStack.template.json file
        <img src="images/02_deploy_cloudformation/01_upload_cf_template.png"
          alt="Upload CloudFront CloudFormation Template" class="screenshot">
      </li>
      <li>Click 'Next'</li>
      <li>
        Set the various CloudFormation Parameters
        <img src="images/02_deploy_cloudformation/02_set_cf_parameters.png" alt="Set CloudFormation Parameters"
          class="screenshot">
        <ul>
          <li>certificateArn should be the ARN of your certificate (copied earlier)</li>
          <li>
            codeBucketName should be the bucket with the code in it - if you have changed from the default, alter it
            here
          </li>
          <li>codeBucketRegion - the region the codeBucket is in</li>
          <li>domainName - your domain name (excluding prefixes such as www. or auth.)</li>
          <li>hostedZoneId - the Hosted Zone for your Route 53 domain</li>
          <li>uniqueId - a unique number added to resources to prevent name conflicts, this could be the account number
          </li>
        </ul>
      </li>
      <li>Click 'Next'</li>
      <li>
        On the next page most options can be left as default, the tick box for acknowledging CloudFormation might create
        IAM roles should be ticked
        <img src="images/02_deploy_cloudformation/03_stack_option_confirm.png" alt="Confirm Stack Options Page"
          class="screenshot">
      </li>
      <li>Click 'Next'</li>
      <li>
        Click 'Submit' to create the stack
        <img src="images/02_deploy_cloudformation/04_final_confirmation.png" alt="Final CloudFormation Confirmation"
          class="screenshot">
      </li>
      <li>
        Once the stack shows a status of CREATE_COMPLETE, select it
        <img src="images/02_deploy_cloudformation/05_stack_details.png" alt="Stack Details" class="screenshot">
      </li>
      <li>
        Click on the 'Outputs' tab across the top
        <img src="images/02_deploy_cloudformation/06_stack_outputs.png" alt="Stack Outputs" class="screenshot">
      </li>
      <li>Take note of the CloudFrontDistributionDomainName</li>
    </ol>
    <h2>Update information after deployment</h2>
    <ol>
      <li>Return to Route 53</li>
      <li>
        Edit each of the previously-created A Records
        <ol>
          <li>Switch the 'Alias' toggle to on</li>
          <li>Select 'Alias to CloudFront Distribution'</li>
          <li>Put the CloudFront Distribution Domain Name copied from the output of the cloudformation stack in the
            'value' field</li>
          <li>Update the record</li>
        </ol>
      </li>
    </ol>
    <h2>Create User</h2>
    <p>This creates a user who can log into the dashboard. To create an additional installer, create an IAM user instead
      (further information available on AWS help pages).</p>
    <ol>
      <li>
        Type <span class="cmd">Cognito</span> into the AWS Console search bar and select Cognito from the menu
        <img src="images/03_create_user/01_cognito_console.png" alt="Finding Cognito on the console" class="screenshot">
      </li>
      <li>
        Ensure 'User Pool' is selected on the left
        <img src="images/03_create_user/02_user_pool_list.png" alt="User Pool List" class="screenshot">
      </li>
      <li>
        Click on 'Users' under 'User Management'
        <img src="images/03_create_user/03_user_pool_page.png" alt="User Pool Page" class="screenshot">
      </li>
      <li>
        The new user page will appear
        <img src="images/03_create_user/05_new_user_page.png" alt="New User Page" class="screenshot">
      </li>
      <li>
        The options on this page are fairly self-explanitory:
        <ul>
          <li>Choose whether to send an email invitation to the user (this may not be necessary if the user is for you)
          </li>
          <li>enter the email address of the user (this can be marked as verified if the user is you)</li>
          <li>Add an optional phone number</li>
          <li>
            Select whether the temporary password (which is emailed to the user for their first log in)
            is set by you, or generated by AWS.
          </li>
        </ul>
        <img src="images/03_create_user/06_new_user_page_filled_in.png" alt="Filled In New User Page"
          class="screenshot">
      </li>
      <li>Click 'Create user'</li>
    </ol>
  </body>

</html>